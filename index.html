<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª - ÙÙ†Ø¯Ù‚ Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„Ø£Ø¨ÙŠØ¶</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Ù…ÙƒØªØ¨Ø© qz-tray Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© -->
    <script src="https://cdn.jsdelivr.net/npm/qz-tray@2.1.0/dist/js/qz-tray.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        
        :root {
            --primary: #2c3e50;
            --secondary: #8e44ad;
            --accent: #e67e22;
            --light: #f9f9f9;
            --gold: #f1c40f;
            --shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e0e8f5 100%);
            color: #333;
            min-height: 100vh;
            padding: 0;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø´Ø¹Ø§Ø± */
        .logo-container {
            position: relative;
            padding: 1.5rem 1rem;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .logo-img {
            width: 120px;
            height: 120px;
            object-fit: contain;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 0 0 4px var(--gold), var(--shadow);
            background: white;
            padding: 5px;
            transform: translateY(0);
            transition: all 0.3s ease;
        }
        
        .hotel-name {
            margin-top: 1rem;
            font-size: 1.8rem;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
            display: inline-block;
        }
        
        .hotel-name::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 25%;
            width: 50%;
            height: 3px;
            background: var(--gold);
            border-radius: 3px;
        }
        
        .subtitle {
            color: rgba(255,255,255,0.9);
            font-size: 0.95rem;
            margin-top: 0.5rem;
        }
        
        /* Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        .menu-section {
            padding: 1.5rem;
        }
        
        .section-title {
            color: var(--secondary);
            font-size: 1.4rem;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px dashed rgba(142, 68, 173, 0.3);
            position: relative;
        }
        
        .section-title::before {
            content: '';
            position: absolute;
            right: 0;
            bottom: -2px;
            width: 30%;
            height: 2px;
            background: var(--gold);
        }
        
        .menu-items {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        .menu-item {
            display: flex;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
            cursor: pointer;
        }
        
        .menu-item:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .item-image {
            width: 100px;
            height: 100px;
            flex-shrink: 0;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .item-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to right, rgba(0,0,0,0.03), transparent);
        }
        
        .item-content {
            padding: 1rem;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .item-name {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 0.3rem;
        }
        
        .item-price {
            color: var(--accent);
            font-weight: 700;
            font-size: 1.1rem;
        }

        /* Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© */
        .add-btn {
            background: var(--secondary);
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 0.5rem;
        }

        .add-btn:active {
            background: var(--primary);
            transform: scale(0.9);
        }

        /* Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
        .cart-container {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
        }

        .cart-btn {
            background: var(--accent);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
        }

        .cart-btn:active {
            transform: scale(0.95);
        }

        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
        .orders-modal {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .orders-content {
            background: white;
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            padding: 1.5rem;
            max-height: 80vh;
            overflow-y: auto;
        }

        .orders-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        .orders-title {
            color: var(--primary);
            font-size: 1.4rem;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #666;
            cursor: pointer;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #eee;
        }

        .order-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quantity-btn {
            background: var(--light);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .order-quantity {
            margin: 0 0.5rem;
            font-weight: bold;
        }

        .total-section {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 2px solid var(--light);
            text-align: center;
        }

        .total-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--accent);
            margin: 1rem 0;
        }

        .print-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            margin-bottom: 0.5rem;
        }

        .print-btn:active {
            background: var(--primary);
            transform: scale(0.98);
        }

        .print-thermal-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }

        .print-thermal-btn:active {
            background: #219653;
            transform: scale(0.98);
        }
        
        footer {
            text-align: center;
            padding: 1.5rem;
            background: var(--light);
            color: #666;
            font-size: 0.85rem;
            border-top: 1px solid rgba(0,0,0,0.05);
        }
        
        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 480px) {
            .logo-img {
                width: 100px;
                height: 100px;
            }
            
            .hotel-name {
                font-size: 1.5rem;
            }
            
            .item-image {
                width: 80px;
                height: 80px;
            }
            
            .item-name {
                font-size: 1rem;
            }
            
            .item-price {
                font-size: 1rem;
            }
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø­Ø±ÙƒØ© */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .menu-section {
            animation: fadeIn 0.5s ease-out;
        }

        /* Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
        .print-status {
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }

        .print-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .print-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ØªØµÙ…ÙŠÙ… Ø§Ù„Ø´Ø¹Ø§Ø± -->
        <div class="logo-container">
            <img src="images%20(2).jpg" alt="Ø´Ø¹Ø§Ø± ÙÙ†Ø¯Ù‚ Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„Ø£Ø¨ÙŠØ¶" class="logo-img">
            <h1 class="hotel-name">ÙÙ†Ø¯Ù‚ Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„Ø£Ø¨ÙŠØ¶</h1>
            <p class="subtitle">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø§Ù„ÙØ§Ø®Ø±Ø©</p>
        </div>
        
        <!-- Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ø¨Ø§Ø±Ø¯Ø© -->
        <div class="menu-section">
            <h2 class="section-title">
                <i class="fas fa-glass-whiskey" style="margin-left: 8px;"></i>
                Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ø¨Ø§Ø±Ø¯Ø©
            </h2>
            <div class="menu-items">
                <!-- Ù…ÙŠØ§Ù‡ Ù…Ø¹Ø¯Ù†ÙŠØ© -->
                <div class="menu-item" onclick="addToCart('Ù…ÙŠØ§Ù‡ Ù…Ø¹Ø¯Ù†ÙŠØ© (500 Ù…Ù„)', 500)">
                    <div class="item-image" style="background-image: url('1.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ù…ÙŠØ§Ù‡ Ù…Ø¹Ø¯Ù†ÙŠØ© (500 Ù…Ù„)</div>
                        <div class="item-price">500 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ø­Ù„ÙŠØ¨ -->
                <div class="menu-item" onclick="addToCart('Ø­Ù„ÙŠØ¨', 2000)">
                    <div class="item-image" style="background-image: url('2.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ø­Ù„ÙŠØ¨</div>
                        <div class="item-price">2,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ø¨ÙŠØ¨Ø³ÙŠ -->
                <div class="menu-item" onclick="addToCart('Ø¨ÙŠØ¨Ø³ÙŠ', 1000)">
                    <div class="item-image" style="background-image: url('3.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ø¨ÙŠØ¨Ø³ÙŠ</div>
                        <div class="item-price">1,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ø¨ÙŠØ¨Ø³ÙŠ Ø¯Ø§ÙŠØª -->
                <div class="menu-item" onclick="addToCart('Ø¨ÙŠØ¨Ø³ÙŠ Ø¯Ø§ÙŠØª', 1000)">
                    <div class="item-image" style="background-image: url('4.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ø¨ÙŠØ¨Ø³ÙŠ Ø¯Ø§ÙŠØª</div>
                        <div class="item-price">1,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„ -->
                <div class="menu-item" onclick="addToCart('Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„', 4000)">
                    <div class="item-image" style="background-image: url('5.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ø¹ØµÙŠØ± Ø¨Ø±ØªÙ‚Ø§Ù„</div>
                        <div class="item-price">4,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ø¹ØµÙŠØ± Ù„ÙŠÙ…ÙˆÙ† -->
                <div class="menu-item" onclick="addToCart('Ø¹ØµÙŠØ± Ù„ÙŠÙ…ÙˆÙ†', 4000)">
                    <div class="item-image" style="background-image: url('6.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ø¹ØµÙŠØ± Ù„ÙŠÙ…ÙˆÙ†</div>
                        <div class="item-price">4,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ø¹ØµÙŠØ± Ù…ÙˆØ² Ø¨Ø§Ù„Ø¹Ø³Ù„ -->
                <div class="menu-item" onclick="addToCart('Ø¹ØµÙŠØ± Ù…ÙˆØ² Ø¨Ø§Ù„Ø¹Ø³Ù„', 5000)">
                    <div class="item-image" style="background-image: url('7.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ø¹ØµÙŠØ± Ù…ÙˆØ² Ø¨Ø§Ù„Ø¹Ø³Ù„</div>
                        <div class="item-price">5,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ø³Ø§Ø®Ù†Ø© -->
        <div class="menu-section">
            <h2 class="section-title">
                <i class="fas fa-coffee" style="margin-left: 8px;"></i>
                Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ø³Ø§Ø®Ù†Ø©
            </h2>
            <div class="menu-items">
                <!-- Ø¥Ø³Ø¨Ø±ÙŠØ³Ùˆ ÙƒØ¨ÙŠØ± -->
                <div class="menu-item" onclick="addToCart('Ø¥Ø³Ø¨Ø±ÙŠØ³Ùˆ ÙƒØ¨ÙŠØ±', 5000)">
                    <div class="item-image" style="background-image: url('8.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ø¥Ø³Ø¨Ø±ÙŠØ³Ùˆ ÙƒØ¨ÙŠØ±</div>
                        <div class="item-price">5,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ø¥Ø³Ø¨Ø±ÙŠØ³Ùˆ ØµØºÙŠØ± -->
                <div class="menu-item" onclick="addToCart('Ø¥Ø³Ø¨Ø±ÙŠØ³Ùˆ ØµØºÙŠØ±', 3000)">
                    <div class="item-image" style="background-image: url('9.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ø¥Ø³Ø¨Ø±ÙŠØ³Ùˆ ØµØºÙŠØ±</div>
                        <div class="item-price">3,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ -->
                <div class="menu-item" onclick="addToCart('ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ', 3500)">
                    <div class="item-image" style="background-image: url('10.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ</div>
                        <div class="item-price">3,500 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ù†Ø³ÙƒØ§ÙÙŠÙ‡ -->
                <div class="menu-item" onclick="addToCart('Ù†Ø³ÙƒØ§ÙÙŠÙ‡', 3000)">
                    <div class="item-image" style="background-image: url('11.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ù†Ø³ÙƒØ§ÙÙŠÙ‡</div>
                        <div class="item-price">3,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ù‚Ù‡ÙˆØ© ØªØ±ÙƒÙŠØ© -->
                <div class="menu-item" onclick="addToCart('Ù‚Ù‡ÙˆØ© ØªØ±ÙƒÙŠØ©', 3500)">
                    <div class="item-image" style="background-image: url('12.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ù‚Ù‡ÙˆØ© ØªØ±ÙƒÙŠØ©</div>
                        <div class="item-price">3,500 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
                
                <!-- Ø´Ø§ÙŠ -->
                <div class="menu-item" onclick="addToCart('Ø´Ø§ÙŠ', 1000)">
                    <div class="item-image" style="background-image: url('13.jpg')"></div>
                    <div class="item-content">
                        <div class="item-name">Ø´Ø§ÙŠ</div>
                        <div class="item-price">1,000 Ø¯ÙŠÙ†Ø§Ø±</div>
                        <button class="add-btn">+</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
        <div class="cart-container">
            <button class="cart-btn" onclick="showOrders()">
                <i class="fas fa-shopping-cart"></i>
                <div class="cart-badge" id="cartBadge">0</div>
            </button>
        </div>

        <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
        <div class="orders-modal" id="ordersModal">
            <div class="orders-content">
                <div class="orders-header">
                    <h3 class="orders-title">Ø·Ù„Ø¨Ø§ØªÙŠ</h3>
                    <button class="close-btn" onclick="hideOrders()">Ã—</button>
                </div>
                
                <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
                <div id="printStatus" class="print-status"></div>
                
                <div id="ordersList">
                    <!-- Ø§Ù„Ø·Ù„Ø¨Ø§Øª ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                </div>
                <div class="total-section">
                    <div>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ:</div>
                    <div class="total-price" id="totalPrice">0 Ø¯ÙŠÙ†Ø§Ø±</div>
                    <button class="print-btn" onclick="printOrder()">
                        <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø¹Ø§Ø¯ÙŠØ©
                    </button>
                    <button class="print-thermal-btn" onclick="printThermal()">
                        <i class="fas fa-receipt"></i> Ø·Ø¨Ø§Ø¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©
                    </button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Â© <span id="year"></span> ÙÙ†Ø¯Ù‚ Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„Ø£Ø¨ÙŠØ¶. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
        </footer>
    </div>

    <script>
        let cart = [];
        let isQZConnected = false;
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        document.getElementById('year').textContent = new Date().getFullYear();
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
        function addToCart(name, price) {
            const existingItem = cart.find(item => item.name === name);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    name: name,
                    price: price,
                    quantity: 1
                });
            }
            
            updateCartUI();
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø³Ù„Ø©
        function updateCartUI() {
            const cartBadge = document.getElementById('cartBadge');
            const ordersList = document.getElementById('ordersList');
            const totalPrice = document.getElementById('totalPrice');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartBadge.textContent = totalItems;
            
            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            ordersList.innerHTML = '';
            let total = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const orderItem = document.createElement('div');
                orderItem.className = 'order-item';
                orderItem.innerHTML = `
                    <div>
                        <div style="font-weight: bold;">${item.name}</div>
                        <div style="color: var(--accent);">${item.price} Ø¯ÙŠÙ†Ø§Ø±</div>
                    </div>
                    <div class="order-controls">
                        <button class="quantity-btn" onclick="decreaseQuantity(${index})">-</button>
                        <span class="order-quantity">${item.quantity}</span>
                        <button class="quantity-btn" onclick="increaseQuantity(${index})">+</button>
                        <button class="quantity-btn" onclick="removeItem(${index})" style="color: #e74c3c; margin-right: 10px;">Ã—</button>
                    </div>
                `;
                ordersList.appendChild(orderItem);
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ
            totalPrice.textContent = total.toLocaleString() + ' Ø¯ÙŠÙ†Ø§Ø±';
        }
        
        // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙƒÙ…ÙŠØ©
        function increaseQuantity(index) {
            cart[index].quantity += 1;
            updateCartUI();
        }
        
        // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©
        function decreaseQuantity(index) {
            if (cart[index].quantity > 1) {
                cart[index].quantity -= 1;
            } else {
                cart.splice(index, 1);
            }
            updateCartUI();
        }
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬
        function removeItem(index) {
            cart.splice(index, 1);
            updateCartUI();
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        function showOrders() {
            document.getElementById('ordersModal').style.display = 'flex';
        }
        
        // Ø¥Ø®ÙØ§Ø¡ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        function hideOrders() {
            document.getElementById('ordersModal').style.display = 'none';
        }
        
        // Ø·Ø¨Ø§Ø¹Ø© Ø¹Ø§Ø¯ÙŠØ©
        function printOrder() {
            if (cart.length === 0) {
                showPrintStatus('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©! Ø£Ø¶Ù Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.', 'error');
                return;
            }
            
            const printContent = generatePrintContent();
            const printWindow = window.open('', '_blank');
            
            printWindow.document.write(`
                <!DOCTYPE html>
                <html dir="rtl">
                <head>
                    <title>Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ - ÙÙ†Ø¯Ù‚ Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„Ø£Ø¨ÙŠØ¶</title>
                    <style>
                        body { 
                            font-family: Arial, sans-serif; 
                            padding: 20px;
                            direction: rtl;
                        }
                        .header { 
                            text-align: center; 
                            margin-bottom: 20px;
                            border-bottom: 2px solid #333;
                            padding-bottom: 10px;
                        }
                        .order-item { 
                            display: flex; 
                            justify-content: space-between; 
                            margin: 10px 0;
                            padding: 5px 0;
                            border-bottom: 1px dashed #ccc;
                        }
                        .total { 
                            font-weight: bold; 
                            font-size: 1.2em; 
                            text-align: center;
                            margin-top: 20px;
                            padding-top: 10px;
                            border-top: 2px solid #333;
                        }
                        .timestamp {
                            text-align: center;
                            color: #666;
                            margin: 10px 0;
                        }
                        @media print {
                            body { margin: 0; }
                        }
                    </style>
                </head>
                <body>
                    ${printContent}
                </body>
                </html>
            `);
            
            printWindow.document.close();
            printWindow.focus();
            
            setTimeout(() => {
                printWindow.print();
                printWindow.close();
                clearCart();
                showPrintStatus('ØªÙ… Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰', 'success');
            }, 500);
        }
        
        // Ø·Ø¨Ø§Ø¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©
        async function printThermal() {
            if (cart.length === 0) {
                showPrintStatus('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©! Ø£Ø¶Ù Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª Ø£ÙˆÙ„Ø§Ù‹.', 'error');
                return;
            }
            
            try {
                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
                await printToThermalPrinter();
                showPrintStatus('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰', 'success');
                clearCart();
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©:', error);
                showPrintStatus('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©: ' + error.message, 'error');
            }
        }
        
        // Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©
        async function printToThermalPrinter() {
            const receiptContent = generateReceiptContent();
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Web USB API Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
            if ('usb' in navigator) {
                try {
                    await printViaWebUSB(receiptContent);
                    return;
                } catch (error) {
                    console.log('Web USB failed, trying alternative methods');
                }
            }
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… QZ Tray
            try {
                await printViaQZTray(receiptContent);
                return;
            } catch (error) {
                console.log('QZ Tray failed, trying fallback');
            }
            
            // Ø·Ø±ÙŠÙ‚Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© - ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ù†ØµÙŠ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
            printViaTextFile(receiptContent);
        }
        
        // Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¹Ø¨Ø± Web USB
        async function printViaWebUSB(content) {
            // Ù‡Ø°Ø§ Ù…Ø«Ø§Ù„ Ù…Ø¨Ø³Ø· - ØªØ­ØªØ§Ø¬ Ù„ØªØ¹Ø¯ÙŠÙ„Ù‡ Ø­Ø³Ø¨ Ø§Ù„Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
            const vendorId = 0x1234; // Ø¶Ø¹ Vendor ID Ø§Ù„Ø®Ø§Øµ Ø¨Ø·Ø§Ø¨Ø¹ØªÙƒ
            const productId = 0x5678; // Ø¶Ø¹ Product ID Ø§Ù„Ø®Ø§Øµ Ø¨Ø·Ø§Ø¨Ø¹ØªÙƒ
            
            const device = await navigator.usb.requestDevice({ 
                filters: [{ vendorId, productId }] 
            });
            
            await device.open();
            await device.selectConfiguration(1);
            await device.claimInterface(0);
            
            const encoder = new TextEncoder();
            const data = encoder.encode(content);
            
            await device.transferOut(1, data);
            await device.close();
        }
        
        // Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¹Ø¨Ø± QZ Tray
        async function printViaQZTray(content) {
            if (!qz.websocket.isActive()) {
                await qz.websocket.connect();
            }
            
            const config = qz.configs.create("Printer Name"); // Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ø¨Ø¹Ø©
            
            const data = [
                {
                    type: 'raw',
                    data: content
                }
            ];
            
            await qz.print(config, data);
        }
        
        // Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¹Ø¨Ø± Ù…Ù„Ù Ù†ØµÙŠ (Ø·Ø±ÙŠÙ‚Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©)
        function printViaTextFile(content) {
            const blob = new Blob([content], { type: 'text/plain; charset=arabic' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Ø·Ù„Ø¨_Ù…Ø´Ø±ÙˆØ¨Ø§Øª.txt';
            a.click();
            URL.revokeObjectURL(url);
            
            showPrintStatus('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Ù…Ù„Ù. ÙŠØ±Ø¬Ù‰ ÙØªØ­ Ø§Ù„Ù…Ù„Ù ÙˆØ·Ø¨Ø§Ø¹ØªÙ‡ ÙŠØ¯ÙˆÙŠØ§Ù‹.', 'success');
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ù„Ù„Ø·Ø§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©
        function generateReceiptContent() {
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const now = new Date();
            const dateStr = now.toLocaleString('ar-EG');
            
            let content = '\x1B\x40'; // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø·Ø§Ø¨Ø¹Ø©
            content += '\x1B\x61\x01'; // Ù…Ø­Ø§Ø°Ø§Ø© Ù…Ø±ÙƒØ²
            
            // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
            content += 'ÙÙ†Ø¯Ù‚ Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„Ø£Ø¨ÙŠØ¶\n';
            content += 'Ø·Ù„Ø¨ Ù…Ø´Ø±ÙˆØ¨Ø§Øª\n';
            content += '====================\n';
            
            content += '\x1B\x61\x00'; // Ù…Ø­Ø§Ø°Ø§Ø© ÙŠØ³Ø§Ø±
            
            // Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
            content += `Ø§Ù„ØªØ§Ø±ÙŠØ®: ${dateStr}\n`;
            content += '====================\n';
            
            // ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨
            cart.forEach(item => {
                const line = `${item.name} x${item.quantity}`;
                const price = `${(item.price * item.quantity).toLocaleString()} Ø¯ÙŠÙ†Ø§Ø±`;
                content += line + '\n';
                content += price.padStart(40 - line.length) + '\n';
            });
            
            content += '====================\n';
            content += '\x1B\x61\x02'; // Ù…Ø­Ø§Ø°Ø§Ø© ÙŠÙ…ÙŠÙ†
            
            // Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹
            content += `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total.toLocaleString()} Ø¯ÙŠÙ†Ø§Ø±\n`;
            content += '\n';
            
            // Ø±Ø³Ø§Ù„Ø© Ø´ÙƒØ±
            content += '\x1B\x61\x01'; // Ù…Ø­Ø§Ø°Ø§Ø© Ù…Ø±ÙƒØ²
            content += 'Ø´ÙƒØ±Ø§Ù‹ Ù„Ø²ÙŠØ§Ø±ØªÙƒÙ…!\n';
            content += 'Ù†ØªÙ…Ù†Ù‰ Ù„ÙƒÙ… Ø¥Ù‚Ø§Ù…Ø© Ø³Ø¹ÙŠØ¯Ø©\n';
            
            // Ù‚Øµ Ø§Ù„ÙˆØ±Ù‚
            content += '\n\n\n\n\n';
            content += '\x1B\x69'; // Ù‚Øµ Ø§Ù„ÙˆØ±Ù‚ (Ù„Ù„Ø¨Ø¹Ø¶ Ø§Ù„Ø·Ø§Ø¨Ø¹Ø§Øª)
            content += '\x1B\x6D'; // Ù‚Øµ Ø§Ù„ÙˆØ±Ù‚ (Ù„Ù„Ø¨Ø¹Ø¶ Ø§Ù„Ø¢Ø®Ø±)
            
            return content;
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
        function generatePrintContent() {
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const now = new Date();
            
            let content = `
                <div class="header">
                    <h2>ÙÙ†Ø¯Ù‚ Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„Ø£Ø¨ÙŠØ¶</h2>
                    <h3>Ø·Ù„Ø¨ Ù…Ø´Ø±ÙˆØ¨Ø§Øª</h3>
                </div>
                <div class="timestamp">
                    ${now.toLocaleString('ar-EG')}
                </div>
            `;
            
            cart.forEach(item => {
                content += `
                    <div class="order-item">
                        <span>${item.name} (${item.quantity})</span>
                        <span>${(item.price * item.quantity).toLocaleString()} Ø¯ÙŠÙ†Ø§Ø±</span>
                    </div>
                `;
            });
            
            content += `
                <div class="total">
                    Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total.toLocaleString()} Ø¯ÙŠÙ†Ø§Ø±
                </div>
                <div style="text-align: center; margin-top: 30px; font-style: italic;">
                    Ø´ÙƒØ±Ø§Ù‹ Ù„Ø²ÙŠØ§Ø±ØªÙƒÙ…! ğŸ‰
                </div>
            `;
            
            return content;
        }
        
        // ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©
        function clearCart() {
            cart = [];
            updateCartUI();
            hideOrders();
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
        function showPrintStatus(message, type) {
            const statusEl = document.getElementById('printStatus');
            statusEl.textContent = message;
            statusEl.className = `print-status print-${type}`;
            statusEl.style.display = 'block';
            
            setTimeout(() => {
                statusEl.style.display = 'none';
            }, 5000);
        }
        
        // ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø©
        document.addEventListener('touchstart', function(){}, {passive: true});
        
        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        document.getElementById('ordersModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideOrders();
            }
        });
        
        // ØªÙ‡ÙŠØ¦Ø© QZ Tray
        qz.websocket.connect().then(() => {
            isQZConnected = true;
            console.log('QZ Tray connected');
        }).catch(err => {
            console.log('QZ Tray not available:', err);
        });
    </script>
</body>
</html>
